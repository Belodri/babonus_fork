<form class="babonus">
    <h1>{{localize "BABONUS.HEADERS.BUILD_A_BONUS"}}</h1>

    <!-- BUILD-A-BONUS -->
    <div class="build-a-bonus">

        <!-- REQUIRED FIELDS -->
        <h2>{{localize "BABONUS.HEADERS.REQUIRED_FIELDS"}}</h2>
        <div class="babonus-required-fields">
        
            <!-- Identifiers: label and id -->
            <div class="form-group">
                <label title="{{localize 'BABONUS.TITLES.IDENTIFIERS'}}" class="babonus-label">
                    {{localize "BABONUS.LABELS.IDENTIFIERS"}}
                </label>
                <div class="form-fields">
                    <span class="sep babonus-sep">{{localize "BABONUS.LABELS.ID_LABEL"}}</span>
                    <input type="text" name="label" placeholder="{{localize 'BABONUS.VALUES.PH_LABEL'}}">
                    <span class="sep babonus-sep">{{localize "BABONUS.LABELS.ID_IDENTIFIER"}}</span>
                    <input type="text" name="identifier" placeholder="{{localize 'BABONUS.VALUES.PH_ID'}}">
                </div>
            </div>
            <!-- bonus type to apply to: attack, damage, saveDC -->
            <div class="form-group">
                <label title="{{localize 'BABONUS.TITLES.TARGETS'}}" class="babonus-label">
                    {{localize "BABONUS.LABELS.TARGETS"}}
                </label>
                <div class="form-fields">
                    <select name="target">
                        <option value="">&mdash;</option>
                        {{#each targets as |type|}}
                        <option value="{{type.value}}">{{type.label}}</option>
                        {{/each}}
                    </select>
                </div>
            </div>
            <!-- attack bonuses -->
            <div class="babonus-bonuses-attack">
                <div class="form-group bonus-type-attack">
                    <label  title="{{localize 'BABONUS.TITLES.ATTACK_BONUS'}}" class="babonus-label">
                        {{localize "BABONUS.LABELS.BONUS"}}
                    </label>
                    <div class="form-fields">
                        <input type="text" name="values.bonus">
                    </div>
                </div>
            </div>
            <!-- save dc -->
            <div class="babonus-bonuses-save">
                <div class="form-group bonus-type-save">
                    <label title="{{localize 'BABONUS.TITLES.SAVE_BONUS'}}" class="babonus-label">
                        {{localize "BABONUS.LABELS.BONUS"}}
                    </label>
                    <div class="form-fields">
                        <input type="text" name="values.bonus">
                    </div>
                </div>
            </div>
            <!-- damage bonuses -->
            <div class="babonus-bonuses-damage">
                <div class="form-group bonus-type-damage">
                    <label title="{{localize 'BABONUS.TITLES.DAMAGE_BONUS'}}" class="babonus-label">
                        {{localize "BABONUS.LABELS.BONUS"}}
                    </label>
                    <div class="form-fields">
                        <input type="text" name="values.bonus">
                    </div>
                </div>
                <div class="form-group bonus-type-damage-critical">
                    <label title="{{localize 'BABONUS.TITLES.DAMAGE_CRIT'}}" class="babonus-label">
                        {{localize "BABONUS.LABELS.CRIT_BONUS"}}
                    </label>
                    <div class="form-fields">
                        <span class="sep babonus-sep">{{localize "BABONUS.LABELS.CRIT_BONUS_DICE"}}</span>
                        <input type="text" name="values.criticalBonusDice">
                        <span class="sep babonus-sep">{{localize "BABONUS.LABELS.CRIT_BONUS_DAMAGE"}}</span>
                        <input type="text" name="values.criticalBonusDamage">
                    </div>
                </div>
            </div>
            <!-- description -->
            <div class="form-group">
                <label title="{{localize 'BABONUS.TITLES.DESCRIPTION'}}" class="babonus-label">
                    {{localize "BABONUS.LABELS.DESCRIPTION"}}
                </label>
                <div class="form-fields">
                    <input type="text" name="description" placeholder="{{localize 'BABONUS.VALUES.PH_DESCRIPTION'}}">
                </div>
            </div>
            <!-- Item Types: spell, feat, weapon, equipment, consumable -->
            <div class="form-group">
                <label title="{{localize 'BABONUS.TITLES.ITEM_TYPES'}}" class="babonus-label">
                    {{localize "BABONUS.LABELS.ITEM_TYPES"}}
                </label>
                <div class="form-fields">
                    <input type="text" name="itemTypes">
                    <button class="babonus-keys" data-type="itemTypes">
                        <i class="fas fa-key"></i> {{localize "BABONUS.BUTTONS.KEYS"}}
                    </button>
                </div>
            </div>

            <!-- ITEM-SPECIFIC FIELDS -->
            {{#if (and isItem (or canEquip canAttune) )}}
            <div class="form-group item-specific">
                <label title="{{localize 'BABONUS.TITLES.ITEM_SPECIFIC'}}" class="babonus-label">
                    {{localize "BABONUS.LABELS.ITEM_SPECIFIC"}}
                </label>
                <div class="form-fields">
                    {{#if canEquip}}
                    <span class="sep babonus-sep">{{localize "BABONUS.LABELS.EQUIPPED"}}</span>
                    <input type="checkbox" name="itemRequirements.equipped">
                    {{/if}}
                    {{#if canAttune}}
                    <span class="sep babonus-sep">{{localize "BABONUS.LABELS.ATTUNED"}}</span>
                    <input type="checkbox" name="itemRequirements.attuned">
                    {{/if}}
                </div>
            </div>
            {{/if}}
        </div>
        
        <!-- FILTER A BONUS -->
        <h3>{{localize "BABONUS.HEADERS.FILTERS"}}</h3>
        <div class="babonus-filters">

            <!-- always visible -->
            <div class="form-group damageTypes">
                <label class="babonus-label-m">{{localize "BABONUS.LABELS.DAMAGE_TYPES"}}</label>
                <div class="form-fields">
                    <input type="text" name="filters.damageTypes">
                    <button class="babonus-keys" data-type="damageTypes">
                        <i class="fas fa-key"></i> {{localize "BABONUS.BUTTONS.KEYS"}}
                    </button>
                </div>
            </div>
            <div class="form-group abilities">
                <label class="babonus-label-m">{{localize "BABONUS.LABELS.ABILITIES"}}</label>
                <div class="form-fields">
                    <input type="text" name="filters.abilities">
                    <button class="babonus-keys" data-type="abilities">
                        <i class="fas fa-key"></i> {{localize "BABONUS.BUTTONS.KEYS"}}
                    </button>
                </div>
            </div>
            <div class="form-group arbitraryComparison">
                <label class="babonus-label-m" title="{{localize 'BABONUS.TITLES.ARBITRARY_COMPARISON'}}">
                    {{localize "BABONUS.LABELS.ARBITRARY_COMPARISON"}}
                </label>
                <div class="form-fields">
                    <input type="text" name="filters.arbitraryComparison.one" placeholder="{{localize 'BABONUS.VALUES.ARBITRARY_COMPARISON_ONE'}}">
                    <select name="filters.arbitraryComparison.operator" class="babonus-select">
                        <option value="EQ">=</option>
                        <option value="LT">&lt;</option>
                        <option value="GT">&gt;</option>
                        <option value="LE">&le;</option>
                        <option value="GE">&ge;</option>
                    </select>
                    <input type="text" name="filters.arbitraryComparison.other" placeholder="{{localize 'BABONUS.VALUES.ARBITRARY_COMPARISON_OTHER'}}">
                </div>
            </div>
            <div class="form-group statusEffects">
                <label class="babonus-label-m">{{localize "BABONUS.LABELS.STATUS_EFFECTS"}}</label>
                <div class="form-fields">
                    <input type="text" name="filters.statusEffects">
                    <button class="babonus-keys" data-type="statusEffects">
                        <i class="fas fa-key"></i> {{localize "BABONUS.BUTTONS.KEYS"}}
                    </button>
                </div>
            </div>

            <!-- only if 'attack' -->
            <div class="form-group attackTypes">
                <label class="babonus-label-m">{{localize "BABONUS.LABELS.ATTACK_TYPES"}}</label>
                <div class="form-fields">
                    <input type="text" name="filters.attackTypes">
                    <button class="babonus-keys" data-type="attackTypes">
                        <i class="fas fa-key"></i> {{localize "BABONUS.BUTTONS.KEYS"}}
                    </button>
                </div>
            </div>

            <!-- only if 'save' -->
            <div class="form-group saveAbilities">
                <label class="babonus-label-m">{{localize "BABONUS.LABELS.SAVE_ABILITIES"}}</label>
                <div class="form-fields">
                    <input type="text" name="filters.saveAbilities">
                    <button class="babonus-keys" data-type="saveAbilities">
                        <i class="fas fa-key"></i> {{localize "BABONUS.BUTTONS.KEYS"}}
                    </button>
                </div>
            </div>

            <!-- spells only -->
            <div class="form-group spellComponents">
                <label class="babonus-label-m">{{localize "BABONUS.LABELS.COMPONENTS"}}</label>
                <div class="form-fields">
                    <input type="text" name="filters.spellComponents.types">
                    <select name="filters.spellComponents.match" class="babonus-select">
                        <option value="ANY">{{localize "BABONUS.VALUES.MATCH_ANY"}}</option>
                        <option value="ALL">{{localize "BABONUS.VALUES.MATCH_ALL"}}</option>
                    </select>
                    <button class="babonus-keys" data-type="spellComponents">
                        <i class="fas fa-key"></i> {{localize "BABONUS.BUTTONS.KEYS"}}
                    </button>
                </div>
            </div>
            <div class="form-group spellLevels">
                <label class="babonus-label-m">{{localize "BABONUS.LABELS.SPELL_LEVELS"}}</label>
                <div class="form-fields">
                    <input type="text" name="filters.spellLevels">
                    <button class="babonus-keys" data-type="spellLevels">
                        <i class="fas fa-key"></i> {{localize "BABONUS.BUTTONS.KEYS"}}
                    </button>
                </div>
            </div>
            <div class="form-group spellSchools">
                <label class="babonus-label-m">{{localize "BABONUS.LABELS.SPELL_SCHOOLS"}}</label>
                <div class="form-fields">
                    <input type="text" name="filters.spellSchools">
                    <button class="babonus-keys" data-type="spellSchools">
                        <i class="fas fa-key"></i> {{localize "BABONUS.BUTTONS.KEYS"}}
                    </button>
                </div>
            </div>

            <!-- weapons only -->
            <div class="form-group baseWeapons">
                <label class="babonus-label-m">{{localize "BABONUS.LABELS.WEAPONS"}}</label>
                <div class="form-fields">
                    <input type="text" name="filters.baseWeapons">
                    <button class="babonus-keys" data-type="baseWeapons">
                        <i class="fas fa-key"></i> {{localize "BABONUS.BUTTONS.KEYS"}}
                    </button>
                </div>
            </div>
            <div class="form-group weaponProperties">
                <label class="babonus-label-m">{{localize "BABONUS.LABELS.PROPERTIES"}}</label>
                <div class="form-fields">
                    <input type="text" name="filters.weaponProperties.needed">
                    <input type="text" name="filters.weaponProperties.unfit">
                    <button class="babonus-keys" data-type="weaponProperties">
                        <i class="fas fa-key"></i> {{localize "BABONUS.BUTTONS.KEYS"}}
                    </button>
                </div>
            </div>

        </div>

        <!-- WARN ABOUT A BONUS -->
        <div class="babonus-warning" name="babonus-warning"></div>
        
        <!-- SAVE A BONUS -->
        <div class="babonus-save-new">
            <div class="form-group">
                <button name="babonus-save-button">
                    <i class="fas fa-save"></i> {{localize "BABONUS.BUTTONS.SAVE"}}
                </button>
            </div>
        </div>
        
    </div>  


    <!-- CURRENT BONUSES -->
    <div class="current-bonuses">
        {{#if bonuses.length}}
        <h2>{{localize "BABONUS.HEADERS.CURRENT_BONUSES"}}</h2>
        {{/if}}

        {{#each bonuses as |bonus|}}
        <div class="form-group" data-id="{{bonus.type}}.{{bonus.identifier}}">
            {{#if bonus.enabled}}
            <label class="babonus-label">{{bonus.label}}</label>
            {{else}}
            <label class="babonus-label disabled">{{bonus.label}}</label>
            {{/if}}
            <div class="babonus-bonus-details">
                <div class="form-fields">
                    <p class="babonus-identifier">
                        {{bonus.identifier}}
                    </p>
                    <a class="babonus-toggle" name="babonus-toggle-button">
                        {{#if bonus.enabled}} <i class="fas fa-toggle-on"></i>
                        {{else}} <i class="fas fa-toggle-off"></i>
                        {{/if}}
                    </a>
                    <a class="babonus-copy" name="babonus-copy-button">
                        <i class="fas fa-copy"></i>
                    </a>
                    <a class="babonus-edit" name="babonus-edit-button">
                        <i class="fas fa-cog"></i>
                    </a>
                    <a class="babonus-delete" name="babonus-delete-button">
                        <i class="fas fa-trash"></i>
                    </a>
                </div>
            </div>
        </div>
        <p class="babonus-description">{{bonus.description}}</p>
        <hr>
        {{/each}}
    </div>

</form>
